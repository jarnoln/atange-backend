{% extends 'collective/base.html' %}

{% load i18n %}

{% block content %}

<h1>Atange backend</h1>

<p>
  <a href="/api/">API</a>
</p>
{% if users %}
<p>Users:
  {% for user in users %}
      [{{ user.username }}]
  {% endfor %}
</p>
{% endif %}
<h2>Settings</h2>
<ul>
  <li> SQLITE_FILE_PATH: {{ settings.SQLITE_FILE_PATH }}</li>
  <li> CORS_ALLOWED_ORIGINS: {{ settings.CORS_ALLOWED_ORIGINS }}</li>
  <li> ALLOWED_HOSTS: {{ settings.ALLOWED_HOSTS }}</li>
</ul>

{% if statistics %}
<h2>Statistics</h2>
<table>
  <thead>
    <tr>
      <th>Time</th>
      <th>Collectives</th>
      <th>Questions</th>
      <th>Answers</th>
      <th>Users</th>
    </tr>
  </thead>
  <tbody>
{% for stat in statistics %}
    <tr>
      <td>{{ stat.created|date:"Y-m-d H:i e" }}</td>
      <td style="text-align: end">{{ stat.collectives }}</td>
      <td style="text-align: end">{{ stat.questions }}</td>
      <td style="text-align: end">{{ stat.answers }}</td>
      <td style="text-align: end">{{ stat.users }}</td>
    </tr>
{% endfor %}
  </tbody>
</table>
{% else %}
  <p> Nothing here yet</p>
{% endif %}
{% endblock %}
